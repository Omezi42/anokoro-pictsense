/* * style.css
 * Tailwind CSS では難しい、または頻繁に使うカスタムスタイルを定義します。
 */

body {
    /* スクロールバーがガタつくのを防ぐ */
    overflow-y: scroll;
}

/* * キャンバスのレスポンシブ対応
 * index.html の <canvas> には width="800" height="450" を設定しています。
 * CSS で width: 100%, height: auto を設定し、
 * 親コンテナの #canvas-container でアスペクト比を維持します。
 */
#canvas-container {
    /* アスペクト比 16:9 (450 / 800 = 0.5625) */
    /* aspect-ratio プロパティが使えるならそれが一番良いが、古いブラウザも考慮 */
    position: relative;
    width: 100%;
    max-width: 800px; /* キャンバスの最大幅 */
    margin: 0 auto; /* 中央揃え */
}

@media (min-width: 1024px) {
    /* LGサイズ以上では、flex-grow で親が伸縮するため max-width を解除 */
    #canvas-container {
        max-width: none;
    }
}

/* * canvas-container の子要素として 16:9 の領域を確保 
 * (padding-top を使うハック。ただし今回はcanvasに直接サイズ指定してるので不要かも)
 * 代わりに、canvas 自体にスタイルを適用
 */
#drawing-canvas {
    /* 親コンテナに合わせて伸縮し、アスペクト比を維持 */
    width: 100%;
    height: auto;
    /* ピクセルがぼやけないようにする（場合による） */
    image-rendering: -moz-crisp-edges;
    image-rendering: -webkit-crisp-edges;
    image-rendering: pixelated;
    image-rendering: crisp-edges;
}

/* * 流れるコメント
 * #comment-flow-container はキャンバスに重ねた絶対配置
 */
.comment-flow-item {
    position: absolute;
    right: 0;
    transform: translateX(100%);
    white-space: nowrap;
    font-size: 1.5rem; /* 24px */
    font-weight: bold;
    color: white;
    /* テキストに黒い縁取りをつけて読みやすくする */
    text-shadow: 
        -1px -1px 0 #000,  
         1px -1px 0 #000,
        -1px  1px 0 #000,
         1px  1px 0 #000,
        -2px  0   0 #000,
         2px  0   0 #000,
         0   -2px 0 #000,
         0    2px 0 #000;
    
    /* アニメーション */
    animation: comment-flow 8s linear forwards;
    /* 他のコメントと重ならないように */
    will-change: transform;
}

/* 流れるコメントのアニメーション定義 */
@keyframes comment-flow {
    from {
        transform: translateX(100%);
        right: 0;
    }
    to {
        /* 画面幅 + 自身の幅 だけ左に移動する (画面外まで流す) */
        transform: translateX(calc(-100vw - 100%));
        right: 0;
    }
}

/* チャットエリアのスクロールを一番下に固定（JSでも制御） */
#messages-container {
    scroll-behavior: smooth;
}